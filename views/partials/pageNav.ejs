<!DOCTYPE html>
<html>
    <head>
        <style>
            ul{
                padding: 0;
                margin: 0;
                list-style-type: none;
                background-color: rgba(240, 248, 255, 0.671);
                position: fixed;
                width: 100%;
                height: 120px;
                overflow: hidden;
            }
            li{
                float: left;
            }
            li a{
                font-size: large;
                font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                font-weight: 600;
                display: block;
                color: black;
                padding: 50px 30px;
                text-align: center;
                text-decoration: none;
                width: 90px;
            }

            li a:hover:not(.active) {
                color: rgb(138, 117, 165);
            }
            #navbar-brand{
                position: relative;
                top: 30px;
                left: 30px;
                height: 40px;
                width: 100px;
                margin-right: 60px;
            }
            #tempBlock{
                position: relative;
                top: 10px;
                margin-left: 150px;;
                font-size: larger;
                font-weight: bolder;
            }
            /* #tempRange{
                position: relative;
                top: 20px;
                margin-left: 15px;
                font-size: smaller;
                font-weight: lighter;
            } */
            #weatherImg{
                position: relative;
                margin-left: 50px;
                top:10px;
            }
            /* #weatherData{
                margin-top: 20px;
                top:20px; 
            } */
            
        </style>
        <script defer>
            window.onload = function(){
                x = document.getElementById("message")
                try{
                    navigator.geolocation.getCurrentPosition(showPosition);
                }
                catch{
                    x.innerHTML = err;
                }
            }
            function showPosition(position) {
                fetch('http://api.openweathermap.org/data/2.5/weather?lat='+position.coords.latitude+'&lang=en&&lon='+position.coords.longitude+'&appid=e3845fac91ea09459899128cb71305c1')
                 .then(response => response.json())
                 .then(data => {
                    // Debug: for find json pair value
                    console.log(data)
                    var city = data['name'];
                    var country = data['sys']['country']
                    var temp = data['main']['temp']
                    var weather = data['weather'][0]['description']
                    var icon = data['weather'][0]['icon'];
                    var temp = data['main']['temp'];
                    var temp_max = data['main']['temp_max'];
                    var temp_min = data['main']['temp_min'];
                    var img = document.createElement("img");
                    img.src = `http://openweathermap.org/img/wn/${icon}@2x.png`;
                    var src = document.getElementById("weatherImg");
                    src.appendChild(img);
                    x = document.getElementById("city");
                    x.innerHTML = city + ", " + country;
                    y = document.getElementById("weather");
                    y.innerHTML = weather;
                    z = document.getElementById("temp");
                    z.innerHTML = (temp-273.15).toFixed(1) + "℃";
                    a = document.getElementById("tempRange");
                    a.innerHTML = (temp_min-273.15).toFixed(1) + "℃ ~ " + (temp_max-273.15).toFixed(1) + "℃";
                 })
            }
        </script>
    </head>
    <body>
        <ul id="navbar-element">
            <li>
                <img id="navbar-brand" src="/iCloset.png">
            </li>
            <li><a href="#home">HOME</a></li>
            <li><a href="#category">CATEGORY</a></li>
            <li><a href="/:<%= currentuids[0].uid %>/outfit">OUTFITS</a></li>
            <li><a href="/calendar">CALENDAR</a></li>
            <li><a href="#account">ACCOUNT</a></li>
            <li><a href="#logout">LOG OUT</a></li>
        
            <li> <a href="/:<%= currentuids[0].uid %>/like"> LIKE </a></li>
        
            <li>
                <li id="weatherImg"></li>
                <li id="weatherData">
                    <li id="city"></li> <br>
                    <li id="weather"></li> <br>
                    <li id="name">The Weather Chanel</li>
                </li>
            </li>
            <li id="tempBlock">
                <br>
                <li id="temp"></li><br>
                <li id="tempRange"></li><br>
            </li>
        </ul>
    </body>
</html>